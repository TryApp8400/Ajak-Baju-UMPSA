<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>UMPSA T-Shirt Order</title>
<style>
    body {
        font-family: Arial, sans-serif;
        padding: 1rem; /* Reduced padding */
        background-color: #f9f9f9;
        color: #333;
        line-height: 1.6; /* Improved readability */
    }
    h1 {
        text-align: center;
        color: #009495;
        margin-bottom: 1.5rem; /* Slightly reduced margin */
        font-size: 1.8rem; /* Slightly smaller for mobile */
    }
    table {
        width: 100%;
        margin-bottom: 1rem;
        border-collapse: collapse;
        border: 1px solid #ddd;
        background-color: #fff;
        font-size: 0.9rem; /* Slightly smaller font in table */
    }
    th, td {
        border: 1px solid #ddd;
        padding: 0.5rem; /* Reduced padding in table cells */
        text-align: center;
    }
    th {
        background: linear-gradient(to bottom, #009495, #00c698);
        color: white;
    }
    td {
        background-color: #fff;
    }
    button {
        padding: 0.75rem 1.5rem;
        margin-bottom: 1rem;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.3s ease;
        font-size: 1rem; /* Ensure button text is readable */
    }
    /* Style for the "Add T-Shirt" button */
    .add-row-btn {
        background-color: #07b670; /* Specific green color */
        display: block; /* Make it full width on mobile */
        margin-left: auto;
        margin-right: auto;
    }
    .add-row-btn:hover {
        background-color: #059657; /* Darker shade for hover */
    }
    /* Style for the "Remove" buttons */
    .remove-btn {
        background-color: #dc3545 !important;
        padding: 0.5rem 1rem; /* Slightly smaller padding */
        font-size: 0.8rem;
    }
    .remove-btn:hover {
        background-color: #c82333 !important;
    }
    /* Style for the quantity buttons */
    .quantity-button {
        background-color: #07b670; /* Specific green color */
        color: white;
        border: none;
        padding: 0.5rem 0.75rem; /* Slightly larger for touch */
        cursor: pointer;
        border-radius: 4px;
        margin: 0 0.25rem;
        user-select: none;
        transition: background 0.2s ease;
        font-size: 1rem;
        min-width: 30px; /* Ensure they are tappable */
    }
    .quantity-button:hover {
        background-color: #059657; /* Darker shade for hover */
    }
    .quantity-container {
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .quantity-input {
        width: 50px; /* Slightly wider input */
        text-align: center;
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 0.5rem;
        margin: 0 0.5rem;
        font-size: 1rem;
    }
    .quantity-input:focus {
        outline: none;
        border-color: #009495;
        box-shadow: 0 0 0 2px rgba(0, 148, 149, 0.25);
    }
    select {
        padding: 0.75rem;
        margin-bottom: 0.5rem;
        border: 1px solid #ddd;
        border-radius: 4px;
        width: 100%; /* Make select dropdowns full width */
        font-size: 1rem;
        -webkit-appearance: none; /* Remove default arrow for better styling */
        -moz-appearance: none;
        appearance: none;
        background-image: url('data:image/svg+xml;utf8,<svg fill="currentColor" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');
        background-repeat: no-repeat;
        background-position-x: 95%;
        background-position-y: center;
    }
    select:focus {
        outline: none;
        border-color: #009495;
        box-shadow: 0 0 0 2px rgba(0, 148, 149, 0.25);
    }
    input[type="text"] {
        padding: 0.75rem;
        margin-bottom: 0.5rem;
        border: 1px solid #ddd;
        border-radius: 4px;
        width: 100%; /* Make text inputs full width */
        font-size: 1rem;
    }
    input[type="text"]:focus {
        outline: none;
        border-color: #009495;
        box-shadow: 0 0 0 2px rgba(0, 148, 149, 0.25);
    }
    .summary {
        font-size: 1rem;
        margin-top: 1.5rem;
        padding: 1rem;
        background-color: #f5f5f5;
        border-radius: 8px;
        border: 1px solid #ddd;
        color: #000;
    }
    .summary strong {
        font-weight: bold;
        color: #009495;
    }
    .blue-badge {
        position: fixed;
        bottom: 1rem;
        right: 1rem;
        display: flex; /* Changed to flex for better alignment */
        align-items: center;
        justify-content: center;
        background: linear-gradient(to bottom, #009495, #00c698);
        color: white;
        font-weight: bold;
        padding: 1rem; /* Slightly smaller padding */
        border-radius: 50%;
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        text-align: center;
        width: 60px; /* Smaller badge */
        height: 60px; /* Smaller badge */
        font-size: 0.8rem;
        transition: transform 0.2s ease;
    }
    .blue-badge:hover {
        transform: scale(1.05); /* Less aggressive scaling on mobile */
    }
    #order-summary {
        margin-top: 2rem;
        background: #fff;
        padding: 1rem; /* Reduced padding */
        border-radius: 8px;
        border: 1px solid #ddd;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        font-size: 0.9rem;
    }
    #whatsapp-btn {
        background-color: #25d366;
        display: block; /* Full width button */
        margin-top: 1.5rem;
        transition: background-color 0.3s ease;
        padding: 1rem; /* Larger padding for tap */
        font-size: 1.1rem;
        text-align: center;
    }
    #whatsapp-btn:hover {
        background-color: #1e9e4a;
    }

    /* Media query for smaller screens (e.g., phones) */
    @media (max-width: 600px) {
        table thead {
            display: none; /* Hide table headers on small screens */
        }
        table tr {
            display: block;
            margin-bottom: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        table td {
            display: flex;
            align-items: center;
            text-align: right;
            padding-left: 50%;
            position: relative;
            border: none;
        }
        table td:before {
            content: attr(data-label);
            position: absolute;
            left: 0.75rem;
            font-weight: bold;
            text-align: left;
        }
        /* Adjust padding for the last column (Remove button) */
        table td:last-child {
            justify-content: center;
            padding-left: 0;
        }
        table td:last-child:before {
            content: ""; /* Hide label for remove button */
        }
    }
</style>
</head>
<body>
    <h1>UMPSA T-Shirt Order</h1>
    <table id="tshirt-table">
        <thead>
            <tr>
                <th>Sleeve Type</th>
                <th>Size</th>
                <th>Qty</th>
                <th>Custom Text (optional)</th>
                <th>Price / Shirt</th>
                <th>Remove</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
    <button class="add-row-btn" onclick="addRow()">+ Add T-Shirt</button>
    <div class="summary" id="summary-text">
        <p>Subtotal: <strong id="subtotal">RM 0.00</strong></p>
        <p>Discount: <strong id="discount">0%</strong></p>
        <p>Total Price: <strong id="total">RM 0.00</strong></p>
        <p>Deposit (RM30 x pcs): <strong id="deposit">RM 0.00</strong></p>
    </div>
    <div id="savings-badge" class="blue-badge" style="display:none;"></div>
    <div id="order-summary">
        <h3>Order Summary</h3>
        <pre id="summary-output" style="white-space: pre-wrap;"></pre>
        <button id="whatsapp-btn" onclick="sendWhatsApp()">Send Order via WhatsApp</button>
    </div>
    <script>
        const basePrice = 49;
        const longSleeveExtra = 5;
        const customTextExtra = 5;
        const depositPerShirt = 30;
        function addRow() {
            const table = document.querySelector("#tshirt-table tbody");
            const row = document.createElement("tr");
            row.innerHTML = `
                <td data-label="Sleeve Type">
                    <select class="sleeve">
                        <option value="short">Short Sleeve</option>
                        <option value="long">Long Sleeve (+RM5)</option>
                    </select>
                </td>
                <td data-label="Size">
                    <select class="size">
                        <option value="S">S</option>
                        <option value="M">M</option>
                        <option value="L">L</option>
                        <option value="XL">XL</option>
                        <option value="XXL">XXL</option>
                        <option value="XXXL">XXXL</option>
                    </select>
                </td>
                <td data-label="Qty">
                    <div class="quantity-container">
                        <button class="quantity-button minus">-</button>
                        <input type="number" class="quantity-input qty" min="1" value="1">
                        <button class="quantity-button plus">+</button>
                    </div>
                </td>
                <td data-label="Custom Text (optional)"><input type="text" class="customtext" placeholder="e.g. 9 or Aiman"></td>
                <td data-label="Price / Shirt" class="price">RM 49.00</td>
                <td data-label="Remove"><button class="remove-btn" onclick="removeRow(this)">X</button></td>
            `;
            table.appendChild(row);
            updatePricing();
            bindInputs(row);
        }
        function removeRow(button) {
            button.closest("tr").remove();
            updatePricing();
        }
        function bindInputs(row) {
            const qtyInput = row.querySelector(".qty");
            const plusBtn = row.querySelector(".plus");
            const minusBtn = row.querySelector(".minus");
            row.querySelectorAll("input, select").forEach(input => {
                input.addEventListener("input", updatePricing);
                input.addEventListener("change", updatePricing);
            });
            plusBtn.addEventListener("click", () => {
                let qty = parseInt(qtyInput.value) || 0;
                qtyInput.value = qty + 1;
                updatePricing();
            });
            minusBtn.addEventListener("click", () => {
                let qty = parseInt(qtyInput.value) || 0;
                if (qty > 1) {
                    qtyInput.value = qty - 1;
                    updatePricing();
                }
            });
        }
        function updatePricing() {
            let subtotal = 0;
            let totalQty = 0;
            let orderDetails = "";
            const rows = document.querySelectorAll("#tshirt-table tbody tr");
            rows.forEach((row, index) => {
                const size = row.querySelector(".size").value;
                const qty = parseInt(row.querySelector(".qty").value) || 0;
                const sleeve = row.querySelector(".sleeve").value;
                const isLong = sleeve === "long";
                const customText = row.querySelector(".customtext").value.trim();
                let price = basePrice;
                if (isLong) price += longSleeveExtra;
                if (customText !== "") price += customTextExtra;
                row.querySelector(".price").innerText = `RM ${price.toFixed(2)}`;
                subtotal += price * qty;
                totalQty += qty;
                orderDetails += `#${index + 1}: ${qty} pcs - ${sleeve} Sleeve, Size ${size}${customText ? ` - Custom: ${customText}` : ""}\n`;
            });
            let discountRate = Math.min(totalQty, 10) / 100;
            let discountAmount = subtotal * discountRate;
            let total = subtotal - discountAmount;
            let deposit = totalQty * depositPerShirt;
            document.getElementById("subtotal").innerText = `RM ${subtotal.toFixed(2)}`;
            document.getElementById("discount").innerText = `${(discountRate * 100).toFixed(0)}%`;
            document.getElementById("total").innerText = `RM ${total.toFixed(2)}`;
            document.getElementById("deposit").innerText = `RM ${deposit.toFixed(2)}`;
            const badge = document.getElementById("savings-badge");
            if (discountAmount > 0) {
                badge.style.display = "inline-flex";
                badge.innerHTML = `You<br>saved<br>RM ${discountAmount.toFixed(2)}!`;
            } else {
                badge.style.display = "none";
            }
            const summaryOutput = `
Total Shirts: ${totalQty}
${orderDetails}
Subtotal: RM ${subtotal.toFixed(2)}
Discount: ${Math.round(discountRate * 100)}%
Total Price: RM ${total.toFixed(2)}
Deposit Required: RM ${deposit.toFixed(2)}
            `;
            document.getElementById("summary-output").innerText = summaryOutput;
        }
        function sendWhatsApp() {
            const summary = document.getElementById("summary-output").innerText;
            const phone = "";
            const url = `https://wa.me/${phone}?text=${encodeURIComponent(summary)}`;
            window.open(url, "_blank");
        }
        addRow();
    </script>
</body>
</html>